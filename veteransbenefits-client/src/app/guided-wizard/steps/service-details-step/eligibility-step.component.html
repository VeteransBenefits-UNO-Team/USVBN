<div class="container">
  <form [formGroup]="serviceDetailsForm" (ngSubmit)="moveToNextStep()">
    <div class="step-header">
      <h2>General Service Details</h2>
      <p>Start with some basic information about your military service</p>
    </div>
    <div class="form-content">
      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Years of Service</mat-label>
        <input matInput formControlName="yearsOfService" />
        <mat-icon matSuffix>event</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Branch</mat-label>
        <mat-select
          formControlName="branch"
          (selectionChange)="onBranchSelect($event)"
        >
          <mat-option *ngFor="let branch of branches" [value]="branch">{{
            branch
          }}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field
        appearance="outline"
        class="form-field"
        *ngIf="serviceDetailsForm.get('branch')?.value"
      >
        <mat-label>Service Type</mat-label>
        <mat-select formControlName="serviceType">
          <mat-option *ngFor="let type of serviceTypes" [value]="type">
            {{ type }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field
        appearance="outline"
        class="form-field"
        *ngIf="showRankCategory"
      >
        <mat-label>Enlisted or Officer</mat-label>
        <mat-select
          formControlName="rankCategory"
          (selectionChange)="onRankCategorySelect($event)"
        >
          <mat-option
            *ngFor="let category of rankCategories"
            [value]="category"
            >{{ category }}</mat-option
          >
        </mat-select>
      </mat-form-field>

      <mat-form-field
        appearance="outline"
        class="form-field"
        *ngIf="filteredRanks.length > 0"
      >
        <mat-label>Rank at Discharge</mat-label>
        <mat-select formControlName="dischargeRank">
          <mat-option *ngFor="let rank of filteredRanks" [value]="rank">{{
            rank
          }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="form-actions">
      <button
        type="submit"
        mat-raised-button
        color="primary"
        class="next-btn"
        [disabled]="!serviceDetailsForm.valid"
      >
        Next
        <mat-icon>arrow_forward_ios</mat-icon>
      </button>
    </div>
  </form>
</div>
